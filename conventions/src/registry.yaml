file_format: definition/2
attributes:
  - key: storage.object.key
    type: string
    brief: The key of the object in storage bucket
    stability: development
    examples: ["c3p0"]
  - key: storage.bucket
    type: string
    brief: The name of the storage bucket
    stability: development
    examples: ["orders"]
  - key: storage.operation.name
    stability: development
    type:
      members:
        - id: upload
          value: upload
        - id: download
          value: download
    brief: The name of the storage operation.
metrics:
  - name: storage.client.operation.duration
    brief: Duration of storage client operation.
    unit: s
    instrument: histogram
    stability: development
    attributes:
      - ref: storage.operation.name
        requirement_level: required
      - ref: storage.bucket
        requirement_level: required
      - ref: server.address
        requirement_level: required
      - ref: server.port
        requirement_level: required
      - ref: error.type
        requirement_level:
          conditionally_required: if and only if operation has failed
spans:
  - type: storage.client.operation
    brief: Storage client operation.
    stability: development
    kind: client
    name:
      note: The span name should be in the format of "{storage.operation.name} {storage.bucket}".
    attributes:
      - ref: storage.operation.name
      - ref: storage.object.key
      - ref: storage.bucket
      - ref: server.address
      - ref: server.port
      - ref: error.type
